/**
 * PARALLAX SCROLL EFFECT
 * Фіксований фон з рухомим контентом поверх
 * 
 * Структура:
 * - Fixed контейнер (.section-bg) тримає позицію
 * - Absolute зображення всередині зберігають opacity transition
 * - Fixed overlay окремо
 * - Relative контент скролиться
 */

/* === VIEWPORT HEIGHT VARIABLE === */
:root {
    --vh: 1vh;
    --header-height: 80px;
    --header-height-tablet: 70px;
    --header-height-mobile: 60px;
}

/* === BASE SECTION STYLES (all sections) === */
.section-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: var(--z-background);
}

.section-bg-image,
.section-bg-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
}

.section-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: var(--z-overlay);
    background: var(--shadow-alpha-40);
}

.section-content {
    position: relative;
    z-index: var(--z-content);
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--spacing-md);
}

/* === HERO SECTION PARALLAX === */
.hero-section {
    min-height: calc(var(--vh, 1vh) * 100 - var(--header-height));
    height: calc(var(--vh, 1vh) * 100 - var(--header-height));
    overflow: visible;
}

/* Absolute контейнер для фону - тільки в межах hero блоку */
.hero-section .section-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
    background-color: #000000;
}

/* Зображення absolute всередині hero блоку */
.hero-section .section-bg .section-bg-image,
.hero-section .section-bg .hero-bg-light,
.hero-section .section-bg .hero-bg-dark {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    transition: opacity var(--transition-base);
}

/* Overlay absolute - тільки в межах hero блоку */
.hero-section .section-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
}

/* Hero контент скролиться */
.hero-section .section-content {
    position: relative;
    z-index: var(--z-content);
    pointer-events: auto;
}

/* === ПЕРША СЕКЦІЯ ПІСЛЯ HERO === */
.fullscreen-container .featured-courses-section {
    position: relative;
    z-index: var(--z-section);
    height: auto;
    min-height: auto;
    margin-top: -20px;
    padding-top: calc(var(--spacing-xxl) + 20px);
    padding-bottom: var(--spacing-xxl);
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -10px 30px var(--shadow-alpha-30);
}

/* === ІНШІ СЕКЦІЇ === */
.fullscreen-section:not(.hero-section) {
    position: relative;
    z-index: var(--z-section);
    height: auto;
    min-height: 600px;
}

.courses-section,
.mentor-coaching-section,
.experts-section {
    position: relative;
    z-index: var(--z-section);
}

.cta-section {
    height: auto;
    min-height: 400px;
}

/* === GPU ACCELERATION === */
.hero-section .section-bg,
.hero-section .section-overlay {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* === iOS SAFARI FIX === */
@supports (-webkit-touch-callout: none) {
    .hero-section {
        min-height: calc(-webkit-fill-available - var(--header-height));
        height: calc(-webkit-fill-available - var(--header-height));
    }

    .hero-section .section-bg,
    .hero-section .section-overlay {
        -webkit-transform: translateZ(0);
        -webkit-backface-visibility: hidden;
    }

    @media screen and (max-width: 768px) and (orientation: landscape) and (max-height: 500px) {
        .hero-section {
            min-height: calc(100vh - var(--header-height-mobile));
            height: calc(100vh - var(--header-height-mobile));
        }

        .hero-section .section-bg,
        .hero-section .section-overlay {
            position: absolute;
        }
    }
}

/* === RESPONSIVE === */
@media (min-width: 769px) and (max-width: 1024px) {
    .hero-section {
        min-height: calc(var(--vh, 1vh) * 100 - var(--header-height-tablet));
        height: calc(var(--vh, 1vh) * 100 - var(--header-height-tablet));
    }
}

@media (max-width: 768px) {
    .hero-section {
        min-height: calc(var(--vh, 1vh) * 100 - var(--header-height-mobile));
        height: calc(var(--vh, 1vh) * 100 - var(--header-height-mobile));
    }

    .fullscreen-container .featured-courses-section {
        margin-top: -16px;
        padding-top: calc(var(--spacing-xl) + 16px);
        padding-bottom: var(--spacing-xl);
        border-radius: 16px 16px 0 0;
    }

    .fullscreen-section:not(.hero-section) {
        min-height: 500px;
    }
}

/* === PREFERS REDUCED MOTION === */
@media (prefers-reduced-motion: reduce) {

    .hero-section .section-bg,
    .hero-section .section-overlay {
        will-change: auto;
        transform: none;
    }
}

/* === DARK THEME === */
[data-theme="dark"] .fullscreen-container .featured-courses-section,
@media (prefers-color-scheme: dark) {
    [data-theme="auto"] .fullscreen-container .featured-courses-section {
        box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
    }
}