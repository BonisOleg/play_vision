"""
Management command to initialize legal documents
"""
from django.core.management.base import BaseCommand
from django.utils import timezone
from apps.core.models import LegalPage
from datetime import date


class Command(BaseCommand):
    help = 'Initialize legal documents (Offer, Privacy, Copyright Notice)'

    def handle(self, *args, **options):
        """Create or update legal documents"""
        self.stdout.write('Initializing legal documents...')
        
        # Публічна оферта (наданий користувачем текст)
        offer_content = self._get_offer_content()
        self._create_or_update('offer', 'Публічний договір (оферта) про користування сайтом та послугами Play Vision', offer_content)
        
        # Політика конфіденційності (наданий користувачем текст)
        privacy_content = self._get_privacy_content()
        self._create_or_update('privacy', 'Політика конфіденційності компанії Play Vision', privacy_content)
        
        # Попередження про права інтелектуальної власності (наданий користувачем текст)
        terms_content = self._get_terms_content()
        self._create_or_update('terms', 'Попередження про права інтелектуальної власності компанії Play Vision', terms_content)
        
        self.stdout.write(self.style.SUCCESS('✅ Legal documents initialized successfully'))
    
    def _create_or_update(self, slug: str, title: str, content: str):
        """Create or update a legal page"""
        page, created = LegalPage.objects.update_or_create(
            slug=slug,
            defaults={
                'title': title,
                'content': content,
                'version_date': date(2025, 11, 18),
                'is_active': True
            }
        )
        
        action = 'Created' if created else 'Updated'
        self.stdout.write(f'  {action}: {title}')
    
    def _get_offer_content(self) -> str:
        """Get offer document HTML content"""
        return '''
<p><strong>редакція є дійсною з 18.11.2025</strong></p>

<h2>1. ВСТУП</h2>
<p>
Цей документ (надалі - "Оферта") є офіційною публічною пропозицією Компанії "Play Vision" про укладення договору 
на приведених нижче умовах. Договір буде укладений між Вами (користувач сайту) і нами - Компанією "Play Vision". 
Оферта визначає умови користування продуктами та послугами (в подальшому "Послуги"), що пропонуються на сайті 
<a href="http://playvision.com.ua/">http://playvision.com.ua/</a> (за виключенням послуг, що надаються в рамках 
окремого письмового договору), а також умови використання контенту.
</p>

<p>
Під компанією "Play Vision" розуміється Фізична особа-підприємець <strong>Кузьменко Оксана Миколаївна</strong> 
(РНОКПП: 3562910728). Реквізити конкретного постачальника послуг будуть вказані в електронній квитанції, 
інвойсі платіжної системи або виставленому вам рахунку.
</p>

<p>
Якщо з вами "Play Vision" завжди буде містити у собі що найменш ті умови та положення, що викладені у цьому 
документі (надалі "ЗАГАЛЬНІ УМОВИ").
</p>

<p>
Будь ласка, прочитайте оферту уважно. Крім ЗАГАЛЬНИХ УМОВ, викладених у цій оферті, ваш договір із компанією 
"Play Vision" також містить СПЕЦІАЛЬНІ УМОВИ договору, що опубліковані на сторінці з описом продукту (послуги) 
або у спрямованих до вас юридичних повідомленнях (надалі "СПЕЦІАЛЬНІ УМОВИ"). ЗАГАЛЬНІ УМОВИ, що викладені у 
оферті та СПЕЦІАЛЬНІ УМОВИ (надалі разом - "УМОВИ") утворюють юридично обов'язковий договір про надання Послуг 
та користування сайтом.
</p>

<h2>2. ПРИЙНЯТТЯ УМОВ (АКЦЕПТ ОФЕРТИ)</h2>
<p>
Користуючись сайтом <a href="http://playvision.com.ua/">http://playvision.com.ua/</a> (надалі - "Сайт") та купуючи 
послуги, що пропонує компанія "Play Vision", ви виконуєте акцепт оферти і укладаєте з нами договір про надання 
послуг, обов'язковий для виконання. Акцепт оферти дорівнюється до укладення договору у письмовому вигляді.
</p>

<p>Прийняти УМОВИ договору можна за допомогою таких дій:</p>
<ul>
<li><strong>(А)</strong> виконавши дії, що свідчать про прийняття УМОВ договору: натиснувши кнопку, поставивши 
галочку у чекбоксі або виконавши аналогічні дії) на сторінці замовлення послуги на сайті; або</li>
<li><strong>(Б)</strong> фактично скориставшись ПОСЛУГАМИ та матеріалами сайту. В цьому випадку Ви погоджуєтеся з тим, 
що ми будемо розглядати факт користування Послугами як прийняття УМОВ (акцепт оферти).</li>
</ul>

<p>
Користуючись сайтом проекту або послугами, що пропонуються на сайті, ви приймаєте всі вказані УМОВИ, а також 
надаєте згоду на обробку ваших персональних даних у відповідності до нашої Політики конфіденційності, що 
опублікована на нашому сайті за адресою <a href="http://playvision.com.ua/">http://playvision.com.ua/</a>
</p>

<p>
Якщо ви не згодні із існуючими ЗАГАЛЬНИМИ або СПЕЦІАЛЬНИМИ УМОВАМИ договору (що опубліковані на сторінці продукту) 
або нашою Політикою конфіденційності, - залиште сайт та припиніть використання Послуг.
</p>

<h2>3. ПРЕДМЕТ ДОГОВОРУ</h2>
<p>
Предметом договору є користування сайтом, а також Послугами, які ми пропонуємо на нашому сайті та інших сторінках 
проекту "Play Vision".
</p>

<p>
Користувачем може бути будь яка особа, що приймає Умови та користується сайтом та Послугами. Для отримання платних 
послуг та повинні мати повну дієспроможність та бути особою, що досягла 18 років. У випадку укладення договору від 
імені організації, представник організації повинен мати необхідні повноваження.
</p>

<h2>4. ПОСЛУГИ "Play Vision"</h2>
<h3>Послуги та безкоштовні матеріали</h3>
<p>
Обсяг доступних вам послуг залежить від придбаного продукту (курсу) і обраного пакета послуг. Якщо ви користуєтеся 
послугами або матеріалами, доступними у відкритих розділах сайту, ви отримуєте тільки базову інформацію щодо 
необхідної тематики.
</p>

<h3>Платні послуги</h3>
<p>
У разі придбання платних послуг, ви отримуєте розширену інформацію, а також доступ до закритого контенту і платних 
сервісів. Ви можете придбати окремий продукт (курс навчання в онлайн і офлайн форматі) за одноразову плату, 
забронювати участь в живому заході (оффлайн-тренінгу, інтенсиві, семінарі) або ж оформити заявку на індивідуальну 
роботу. Будь ласка, зверніть увагу, деякі передплачені пакети послуг мають на увазі отримання доступу відразу до 
кількох служб або курсам навчання. Зверніть увагу, навчання має на увазі самостійну роботу і виконання вами певних 
завдань (домашніх завдань), які є частиною процесу надання послуг.
</p>

<h2>5. ВАРТІСТЬ ПОСЛУГ</h2>
<p>
Вартість послуг публікується на сторінці замовлення послуг, на нашому сайті, а також в електронних повідомленнях, 
які ви отримуєте на почту. Остаточна вартість послуг у валюті платежу (UAH) відображається на сторінці оплати 
послуг і фіксується в електронному інвойсі платіжної системи або в виставленому вам рахунку. Вартість послуг не 
включає додаткові комісії банків і платіжних систем.
</p>

<p class="contact-info">
<strong>Контактна інформація:</strong><br>
Україна, 79008, Львівська обл., місто Львів, вулиця Стрийська, будинок 45, квартира 87<br>
Email: <a href="mailto:info@playvision.com.ua">info@playvision.com.ua</a><br>
Телефон: <a href="tel:+380982447822">+38 (098) 244-78-22</a>
</p>
'''
    
    def _get_privacy_content(self) -> str:
        """Get privacy policy HTML content"""
        return '''
<p><strong>редакція є дійсною з 18.11.2025</strong></p>

<p>
Ми відповідально ставимося до обробки і зберігання персональної інформації споживачів послуг компанії "Play Vision", 
а також відвідувачів сайту <a href="https://playvision.com.ua/">https://playvision.com.ua/</a>
</p>

<p>
<strong>Персональна інформація</strong> - будь-яка інформація про особу, яка дозволяє прямо або побічно 
ідентифікувати цю особу, включаючи його персональні дані, в розумінні законодавства про захист персональних даних.
</p>

<h2>ПОПЕРЕДЖЕННЯ ПРО ПРАВА ІНТЕЛЕКТУАЛЬНОЇ ВЛАСНОСТІ КОМПАНІЇ Play Vision</h2>

<h3>ТОРГІВЕЛЬНІ МАРКИ</h3>
<p>
На все назви брендів та товарні знаки, що згадуються на сайті, включаючи назви брендів та товарні знаки, що 
належать третім особам, поширюється дія чинного законодавства. Їх згадка на сайті або в навчальних матеріалах 
компанії "Play Vision" не означає, що вони не захищені правами третіх осіб. Знак для товарів і послуг, а також 
торговельне найменування "Play Vision" зареєстровані і належать нам. Ви не можете використовувати зазначені знаки 
для товарів і послуг без нашого письмового дозволу.
</p>

<h3>АВТОРСЬКІ МАТЕРІАЛИ</h3>
<p>
Всі матеріали, розміщені на сайті <a href="http://playvision.com.ua/">http://playvision.com.ua/</a> і інших сайтах 
проекту, а також матеріали, надані вам в ході надання платних послуг (контент) є об'єктом авторського права, 
виключні права, на використання якого належать компанії "Play Vision", незалежно від факту реєстрації та території 
їх дії.
</p>

<p>
Користуючись послугами компанії "Play Vision" ви отримуєте право використовувати освітнього контенту в особистих 
некомерційних цілях. Вартість комерційного використання авторських матеріалів оцінюється в <strong>сто тисяч 
(100 000,00) гривень</strong> за один календарний місяць використання.
</p>

<p>
<strong>Зверніть увагу!</strong> Купівля доступу до навчального контенту "в складчину" або передача ваших облікових 
даних для доступу до навчання третім особам заборонені, - це піратство.
</p>

<h3>ПОРУШЕННЯ ПРАВ ІНТЕЛЕКТУАЛЬНОЇ ВЛАСНОСТІ</h3>
<p>
Будь-яке порушення прав інтелектуальної власності переслідується відповідно до законодавства країни надання послуг 
та міжнародним законодавством, і тягне наступ цивільної, адміністративної та кримінальної відповідальності.
</p>

<p>
У разі виявлення фактів незаконного використання нашої інтелектуальної власності (використання бренду; копіювання 
або переробка матеріалів курсу, або їх поширення; покупка доступу до курсу "в складчину" і передача облікових 
даних для доступу до навчання третім особам і ін.), ми маємо право припинити надання послуг і заблокувати аккаунт 
порушника, без відшкодування вартості навчання.
</p>

<p>
Ми маємо право за своїм вибором вимагати від порушника повного відшкодування збитків, заподіяних таким порушенням 
або ж виплати порушником компенсації в розмірі подвійної плати за правомірне використання об'єктів інтелектуальної 
власності, за кожен випадок неправомірного використання.
</p>

<p>
У разі відмови порушника від добровільної виплати компенсації, ми будемо змушені звернутися до правоохоронних 
органів, ініціювати кримінальне переслідування порушника та стягнути грошову компенсацію в примусовому порядку.
</p>

<h2>1. ЯКУ ІНФОРМАЦІЮ МИ ЗБИРАЄМО І НАВІЩО</h2>
<p>
"Play Vision" збирає і обробляє наступну інформацію: ім'я, прізвище та по батькові користувача (клієнта), поштова 
адреса, адреса електронної пошти та телефон. Ми збираємо тільки ті дані, які ви надаєте нам добровільно.
</p>

<h2>2. МЕТОД І МІСЦЕ ОБРОБКИ ПЕРСОНАЛЬНОЇ ІНФОРМАЦІЇ</h2>
<p>
Обробка персональних даних здійснюється з використанням комп'ютерів і (або) засобів автоматизації відповідно до 
процедур і методами, які відповідають цілям збору даних.
</p>

<p>
Дані обробляються в операційних офісах компанії "Play Vision" і в інших місцях, де знаходяться боку, займаються їх 
обробкою.
</p>

<p class="contact-info">
<strong>Контактна інформація:</strong><br>
Україна, 79008, Львівська обл., місто Львів, вулиця Стрийська, будинок 45, квартира 87<br>
Email: <a href="mailto:info@playvision.com.ua">info@playvision.com.ua</a><br>
Телефон: <a href="tel:+380982447822">+38 (098) 244-78-22</a>
</p>
'''
    
    def _get_terms_content(self) -> str:
        """Get copyright notice HTML content"""
        return '''
<p><strong>редакція є дійсною з 18.11.2025</strong></p>

<h2>ТОРГІВЕЛЬНІ МАРКИ</h2>
<p>
На все назви брендів та товарні знаки, що згадуються на сайті, включаючи назви брендів та товарні знаки, що 
належать третім особам, поширюється дія чинного законодавства.
</p>

<p>
Їх згадка на сайті або в навчальних матеріалах компанії "Play Vision" не означає, що вони не захищені правами 
третіх осіб. Знак для товарів і послуг, а також торговельне найменування <strong>"Play Vision"</strong> зареєстровані 
і належать нам. Ви не можете використовувати зазначені знаки для товарів і послуг без нашого письмового дозволу.
</p>

<h2>АВТОРСЬКІ МАТЕРІАЛИ</h2>
<p>
Всі матеріали, розміщені на сайті <a href="http://playvision.com.ua/">http://playvision.com.ua/</a> і інших сайтах 
проекту, а також матеріали, надані вам в ході надання платних послуг (контент) є об'єктом авторського права, 
виключні права, на використання якого належать компанії "Play Vision", незалежно від факту реєстрації та території 
їх дії.
</p>

<p>
Користуючись послугами компанії "Play Vision" ви отримуєте право використовувати освітнього контенту в особистих 
некомерційних цілях. <strong>Вартість комерційного використання авторських матеріалів оцінюється в сто тисяч 
(100 000,00) гривень за один календарний місяць використання.</strong>
</p>

<p>
Копіювання, переробка, модифікація, повне або часткове використання, публічне відтворення і поширення матеріалів, 
розміщених на сайті, або надаються вам в ході навчання, так само як і використання контенту в комерційних цілях, без 
письмового дозволу правовласника, <strong>строго заборонено і переслідується по закону</strong>.
</p>

<p class="warning">
<strong>Зверніть увагу!</strong> Купівля доступу до навчального контенту "в складчину" або передача ваших облікових 
даних для доступу до навчання третім особам заборонені, - це піратство.
</p>

<h2>ПОРУШЕННЯ ПРАВ ІНТЕЛЕКТУАЛЬНОЇ ВЛАСНОСТІ</h2>
<p>
Будь-яке порушення прав інтелектуальної власності переслідується відповідно до законодавства країни надання послуг 
та міжнародним законодавством, і тягне наступ цивільної, адміністративної та кримінальної відповідальності.
</p>

<p>
У разі виявлення фактів незаконного використання нашої інтелектуальної власності (використання бренду; копіювання 
або переробка матеріалів курсу, або їх поширення; покупка доступу до курсу "в складчину" і передача облікових даних 
для доступу до навчання третім особам і ін.), ми маємо право <strong>припинити надання послуг і заблокувати аккаунт 
порушника, без відшкодування вартості навчання.</strong>
</p>

<p>
Ми маємо право за своїм вибором вимагати від порушника повного відшкодування збитків, заподіяних таким порушенням 
або ж виплати порушником компенсації в розмірі подвійної плати за правомірне використання об'єктів інтелектуальної 
власності, за кожен випадок неправомірного використання.
</p>

<p>
У разі відмови порушника від добровільної виплати компенсації, ми будемо змушені звернутися до правоохоронних органів, 
ініціювати кримінальне переслідування порушника та стягнути грошову компенсацію в примусовому порядку.
</p>

<p class="contact-info">
<strong>Контактна інформація:</strong><br>
<strong>Кузьменко Оксана Миколаївна (ФОП), РНОКПП: 3562910728</strong><br>
Україна, 79008, Львівська обл., місто Львів, вулиця Стрийська, будинок 45, квартира 87<br>
Email: <a href="mailto:info@playvision.com.ua">info@playvision.com.ua</a><br>
Телефон: <a href="tel:+380982447822">+38 (098) 244-78-22</a>
</p>
'''

