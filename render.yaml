databases:
  - name: playvision-db
    databaseName: playvision
    user: playvision
    region: frankfurt

services:
  - type: web
    name: playvision
    runtime: python
    region: frankfurt
    buildCommand: "chmod +x build.sh && ./build.sh"
    startCommand: "gunicorn playvision.wsgi:application --bind 0.0.0.0:$PORT --workers 2 --timeout 120"
    plan: starter
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.9
      - key: DJANGO_ENV
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: playvision-db
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: ALLOWED_HOSTS
        value: ".onrender.com,playvision.onrender.com"
      - key: DISABLE_COLLECTSTATIC
        value: 0
      - key: DEBUG
        value: 'False'
      - key: DJANGO_SETTINGS_MODULE
        value: playvision.settings.production
      # Optional email settings
      - key: EMAIL_HOST
        value: smtp.gmail.com
      - key: EMAIL_PORT
        value: 587
      - key: EMAIL_USE_TLS
        value: 'True'
      # AI Assistant settings
      - key: AI_ENABLED
        value: 'True'
      - key: AI_MAX_TOKENS
        value: 500
      - key: AI_TEMPERATURE
        value: 0.7
      
      # PWA settings
      - key: PWA_ENABLED
        value: 'True'
      
      # Cloudinary settings (обов'язково для продакшену)
      # Add these manually in Render dashboard:
      # CLOUDINARY_URL - full cloudinary URL (cloudinary://API_KEY:API_SECRET@CLOUD_NAME)
      # CLOUDINARY_CLOUD_NAME - your cloud name
      # CLOUDINARY_API_KEY - your API key
      # CLOUDINARY_API_SECRET - your API secret
      
      # Add these manually in Render dashboard:
      # EMAIL_HOST_USER - your email
      # EMAIL_HOST_PASSWORD - your app password
      # STRIPE_PUBLISHABLE_KEY - your Stripe key
      # STRIPE_SECRET_KEY - your Stripe secret
      # STRIPE_WEBHOOK_SECRET - your webhook secret
      # OPENAI_API_KEY - your OpenAI API key (sk-proj-...)
      # ANTHROPIC_API_KEY - your Anthropic API key (sk-ant-...)
      # VAPID_PRIVATE_KEY - for PWA push notifications
      # VAPID_PUBLIC_KEY - for PWA push notifications
      # SENDPULSE_ID - SendPulse CRM Client ID (for landing page)
      # SENDPULSE_SECRET - SendPulse CRM Client Secret (for landing page)
      # GOOGLE_ANALYTICS_ID - Google Analytics tracking ID (optional, for landing page)
      # FACEBOOK_PIXEL_ID - Facebook Pixel ID (optional, for landing page)
    autoDeploy: true