# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Render (–ø—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –º—ñ–≥—Ä–∞—Ü—ñ–π)

## üéØ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. ‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ—é
- **–§–∞–π–ª:** `apps/content/migrations/0016_reset_categories_and_courses.py` ‚ùå –í–ò–î–ê–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫, —â–æ –º–æ–≥–ª–∞ –≤–ø–∞—Å—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ

### 2. ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –±–µ–∑–ø–µ—á–Ω—É –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ—é
- **–§–∞–π–ª:** `apps/content/migrations/0016_safe_reset_all_content.py` ‚úÖ –°–¢–í–û–†–ï–ù–û
- **–©–æ —Ä–æ–±–∏—Ç—å:**
  - ‚úÖ –í–∏–¥–∞–ª—è—î –≤—Å—ñ –¥–∞–Ω—ñ (UserCourseProgress, Favorites, Materials, Courses, Categories)
  - ‚úÖ –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–µ–≥–æ—Ä—ñ–π (12 –∫–∞—Ç–µ–≥–æ—Ä—ñ–π, –≤–∫–ª—é—á–∞—é—á–∏ "–¢—Ä–µ–Ω–µ—Ä—Å—Ç–≤–æ" –∑ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏)
  - ‚úÖ –ü—Ä–∞—Ü—é—î –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è—Ö (atomic)
  - ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –Ω–∞ Render
  - ‚úÖ –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ gracefully

### 3. ‚úÖ –û—á–∏—â–µ–Ω–æ build.sh –≤—ñ–¥ SQL-—Ö–∞–∫—ñ–≤
- **–©–æ –≤–∏–¥–∞–ª–µ–Ω–æ:**
  - ‚ùå –ü—Ä—è–º—ñ SQL UPDATE –≤ —Ç–∞–±–ª–∏—Ü—é `django_migrations`
  - ‚ùå –°–ø—Ä–æ–±–∏ "—Ñ—ñ–∫—Å–∏—Ç–∏" –º—ñ–≥—Ä–∞—Ü—ñ—ó events –≤—Ä—É—á–Ω—É
  - ‚ùå –ù–µ–±–µ–∑–ø–µ—á–Ω—ñ INSERT –≤ `django_migrations`
- **–©–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—å:**
  - ‚úÖ –ü—Ä–æ—Å—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î
  - ‚úÖ `python manage.py migrate --fake-initial --noinput`

### 4. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–π—à–ª–æ —É—Å–ø—ñ—à–Ω–æ
```bash
‚úì –í–∏–¥–∞–ª–µ–Ω–æ 5 –∫—É—Ä—Å—ñ–≤
‚úì –í–∏–¥–∞–ª–µ–Ω–æ 4 –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ–π
‚úì –í–∏–¥–∞–ª–µ–Ω–æ 8 –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
‚úì –°—Ç–≤–æ—Ä–µ–Ω–æ 12 –Ω–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
```

---

## üöÄ –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ—ó –Ω–∞ Render:

### –ö—Ä–æ–∫ 1: Build –ø—Ä–æ—Ü–µ—Å (`build.sh`)
```bash
1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π ‚úì
2. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è GeoIP –±–∞–∑–∏ ‚úì
3. Collect static files ‚úì
4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞ (—è–∫—â–æ –Ω–µ —ñ—Å–Ω—É—î) ‚úì
5. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î ‚úì
6. –ü–æ–∫–∞–∑ pending –º—ñ–≥—Ä–∞—Ü—ñ–π ‚úì
7. –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π --fake-initial ‚úì
```

### –ö—Ä–æ–∫ 2: –ú—ñ–≥—Ä–∞—Ü—ñ—è `0016_safe_reset_all_content`
```python
–£–í–ê–ì–ê! –¶—è –º—ñ–≥—Ä–∞—Ü—ñ—è:
- –í–∏–¥–∞–ª–∏—Ç—å –í–°–Ü —ñ—Å–Ω—É—é—á—ñ –∫—É—Ä—Å–∏
- –í–∏–¥–∞–ª–∏—Ç—å –í–°–Ü —ñ—Å–Ω—É—é—á—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- –í–∏–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ –∫—É—Ä—Å–∞—Ö
- –í–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ –æ–±—Ä–∞–Ω—ñ –∫—É—Ä—Å–∏
- –í–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —Å—Ç–≤–æ—Ä–∏—Ç—å:
- 1 –≥–æ–ª–æ–≤–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é "–¢—Ä–µ–Ω–µ—Ä—Å—Ç–≤–æ" (–∑ 4 –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏)
- 7 —ñ–Ω—à–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π (–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞, –ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç, –ü—Å–∏—Ö–æ–ª–æ–≥—ñ—è, etc.)
```

### –ö—Ä–æ–∫ 3: Post-deploy –∫–æ–º–∞–Ω–¥–∏
```bash
8. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è cache table ‚úì
9. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è AI knowledge base ‚úì
10. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è demo data ‚úì
11. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è featured courses ‚úì
12. –û–Ω–æ–≤–ª–µ–Ω–Ω—è production events ‚úì
```

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û –ü–ï–†–ï–î DEPLOY:

### –Ø–∫—â–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ —î –í–ê–ñ–õ–ò–í–Ü –¥–∞–Ω—ñ:
1. **–ó—Ä–æ–±–∏—Ç–∏ BACKUP –±–∞–∑–∏ –¥–∞–Ω–∏—Ö** —á–µ—Ä–µ–∑ Render Dashboard:
   ```
   Dashboard ‚Üí Database ‚Üí Manual Backup
   ```

2. **–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∫—É—Ä—Å–∏** (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ):
   ```bash
   python manage.py dumpdata content.Course content.Material --indent 2 > backup_courses.json
   ```

3. **–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π):
   ```bash
   python manage.py dumpdata content.UserCourseProgress --indent 2 > backup_progress.json
   ```

### –Ø–∫—â–æ –¥–∞–Ω—ñ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω—ñ (—á–∏—Å—Ç–∏–π —Å—Ç–∞—Ä—Ç):
‚úÖ **–ú–æ–∂–Ω–∞ –¥–µ–ø–ª–æ—ó—Ç–∏ –æ–¥—Ä–∞–∑—É** - –º—ñ–≥—Ä–∞—Ü—ñ—è –≤—Å–µ –æ—á–∏—Å—Ç–∏—Ç—å —ñ —Å—Ç–≤–æ—Ä–∏—Ç—å –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üìã Checklist –ø–µ—Ä–µ–¥ git push:

- [x] –í–∏–¥–∞–ª–µ–Ω–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ—é `0016_reset_categories_and_courses.py`
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ –±–µ–∑–ø–µ—á–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ—é `0016_safe_reset_all_content.py`
- [x] –û—á–∏—â–µ–Ω–æ `build.sh` –≤—ñ–¥ SQL-—Ö–∞–∫—ñ–≤
- [x] –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –º—ñ–≥—Ä–∞—Ü—ñ—é
- [ ] –ó—Ä–æ–±–ª–µ–Ω–æ backup –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å —â–æ ENV –∑–º—ñ–Ω–Ω—ñ –Ω–∞ Render –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ:
  - [ ] `DATABASE_URL`
  - [ ] `SECRET_KEY`
  - [ ] `CLOUDINARY_URL` + `CLOUDINARY_CLOUD_NAME/API_KEY/API_SECRET`
  - [ ] `EMAIL_HOST_USER` + `EMAIL_HOST_PASSWORD`
  - [ ] `ALLOWED_HOSTS`
  - [ ] `DJANGO_SETTINGS_MODULE=playvision.settings.production`

---

## üî• –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è deploy:

```bash
# 1. –î–æ–¥–∞—Ç–∏ –∑–º—ñ–Ω–∏ –¥–æ git
git add .
git commit -m "feat: –±–µ–∑–ø–µ—á–Ω–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π + –æ—á–∏—Å—Ç–∫–∞ build.sh"

# 2. Push –Ω–∞ Render (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π)
git push origin main

# 3. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤ –Ω–∞ Render
# Dashboard ‚Üí Service ‚Üí Logs (–≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ)
```

---

## üõë –Ø–∫—â–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫ –Ω–∞ Render:

### –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó:
```bash
# 1. –ó–∞–π—Ç–∏ –≤ Render Shell
Dashboard ‚Üí Service ‚Üí Shell

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py showmigrations content

# 3. –Ø–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—è 0016 failed, –º–æ–∂–Ω–∞:
python manage.py migrate content 0015_fix_analytics_category_name --fake
python manage.py migrate content 0016_safe_reset_all_content
```

### Rollback (—è–∫—â–æ –î–£–ñ–ï –ø–æ–≥–∞–Ω–æ):
```bash
# –í—ñ–¥–∫–æ—Ç–∏—Ç–∏ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó —Ä–æ–±–æ—á–æ—ó –≤–µ—Ä—Å—ñ—ó
python manage.py migrate content 0015_fix_analytics_category_name

# –ê–±–æ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑ backup
# Dashboard ‚Üí Database ‚Üí Restore from backup
```

---

## ‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è deploy:

1. **–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó (12 —à—Ç):**
   - –¢—Ä–µ–Ω–µ—Ä—Å—Ç–≤–æ (+ 4 –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)
   - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —ñ —Å–∫–∞—É—Ç–∏–Ω–≥
   - –ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
   - –°–ø–æ—Ä—Ç–∏–≤–Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—è
   - –ù—É—Ç—Ä–∏—Ü—ñ–æ–ª–æ–≥—ñ—è
   - –†–µ–∞–±—ñ–ª—ñ—Ç–∞—Ü—ñ—è
   - –§—É—Ç–±–æ–ª—ñ—Å—Ç
   - –ë–∞—Ç—å–∫–æ

2. **–ö—É—Ä—Å–∏:** 0 (–±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ —á–µ—Ä–µ–∑ management –∫–æ–º–∞–Ω–¥–∏)

3. **–ü—Ä–æ–≥—Ä–µ—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:** –æ—á–∏—â–µ–Ω–∏–π

4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è:** –≥–æ—Ç–æ–≤–∞ –¥–ª—è –Ω–æ–≤–∏—Ö –∫—É—Ä—Å—ñ–≤

---

## üéâ –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ deploy:

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —á–µ—Ä–µ–∑ Django Shell –Ω–∞ Render
python manage.py shell -c "from apps.content.models import Category; print(Category.objects.count())"

# 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π –∫—É—Ä—Å —á–µ—Ä–µ–∑ admin panel
https://playvision.onrender.com/admin/content/course/add/

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏ –Ω–∞ frontend
https://playvision.onrender.com/courses/
```

---

## üìä –§–∞–π–ª–∏ —â–æ –∑–º—ñ–Ω–∏–ª–∏—Å—å:

```
DELETED:   apps/content/migrations/0016_reset_categories_and_courses.py
CREATED:   apps/content/migrations/0016_safe_reset_all_content.py
MODIFIED:  build.sh (–≤–∏–¥–∞–ª–µ–Ω–æ SQL-—Ö–∞–∫–∏, —Å–ø—Ä–æ—â–µ–Ω–æ –ª–æ–≥—ñ–∫—É)
```

---

**–ì–æ—Ç–æ–≤–æ –¥–æ deploy!** üöÄ

