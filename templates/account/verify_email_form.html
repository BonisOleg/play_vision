{% extends 'base/base.html' %}
{% load static %}

{% block title %}–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å Email - Play Vision{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/account.css' %}">
<link rel="stylesheet" href="{% static 'css/components/auth.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="account-layout">
        <!-- Sidebar Navigation -->
        <nav class="account-sidebar">
            <div class="account-user-info">
                <div class="user-avatar">
                    {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä">
                    {% else %}
                    <div class="avatar-placeholder">{{ user.email|first|default:"U" }}</div>
                    {% endif %}
                </div>
                <div class="user-details">
                    <h3>{{ user.email|default:user.phone }}</h3>
                    <span class="subscription-badge free">–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</span>
                </div>
            </div>

            <ul class="account-nav">
                <li><a href="{% url 'cabinet:dashboard' %}">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                <li><a href="{% url 'accounts:verify_email_form' %}" class="active">‚úâÔ∏è –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ Email</a></li>
                <li><a href="{% url 'cabinet:settings' %}">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="account-main">
            <div class="account-header">
                <h1>–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å Email –∞–¥—Ä–µ—Å—É</h1>
                <p>–ú–∏ –≤—ñ–¥–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –Ω–∞ {{ user.email }}</p>
            </div>

            <div class="auth-card">
                {% if is_phone_only_user %}
                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ!</strong>
                    –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å email –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.
                    –ö–æ–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ {{ user.email }}.
                </div>
                {% else %}
                <div class="alert alert-info">
                    <strong>üìß –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—à—Ç—É!</strong>
                    –ö–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ {{ user.email }}.
                    –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–∞–∫–æ–∂ –ø–∞–ø–∫—É "–°–ø–∞–º".
                </div>
                {% endif %}

                <form method="post" class="auth-form">
                    {% csrf_token %}

                    {% if form.non_field_errors %}
                    <div class="alert alert-danger">
                        {{ form.non_field_errors }}
                    </div>
                    {% endif %}

                    <div class="form-group">
                        <label for="{{ form.code.id_for_label }}">–ö–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</label>
                        {{ form.code }}
                        {% if form.code.errors %}
                        <div class="error-message">{{ form.code.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <button type="submit" class="btn btn--primary btn--full">
                        –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ Email
                    </button>
                </form>

                <div class="auth-footer">
                    <p>–ù–µ –æ—Ç—Ä–∏–º–∞–ª–∏ –∫–æ–¥? <a href="{% url 'accounts:add_email' %}">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–Ω–æ–≤—É</a></p>
                    <p>–ö–æ–¥ –¥—ñ–π—Å–Ω–∏–π –ø—Ä–æ—Ç—è–≥–æ–º 15 —Ö–≤–∏–ª–∏–Ω.</p>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}