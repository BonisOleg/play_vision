<!-- –í–∫–ª–∞–¥–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—ó –ø–ª–∞—Ç–µ–∂—ñ–≤ -->
<div class="payments-tab">
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤ -->
    <div class="payment-stats">
        <div class="stat-card">
            <div class="stat-icon">üí≥</div>
            <div class="stat-content">
                <h3>{{ payment_stats.total_payments }}</h3>
                <p>–í—Å—å–æ–≥–æ –ø–ª–∞—Ç–µ–∂—ñ–≤</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-content">
                <h3>{{ payment_stats.successful_payments }}</h3>
                <p>–£—Å–ø—ñ—à–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-content">
                <h3>${{ payment_stats.total_amount|floatformat:2 }}</h3>
                <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìÖ</div>
            <div class="stat-content">
                {% if payment_stats.last_payment %}
                <h3>{{ payment_stats.last_payment.created_at|date:"d.m.Y" }}</h3>
                <p>–û—Å—Ç–∞–Ω–Ω—ñ–π –ø–ª–∞—Ç—ñ–∂</p>
                {% else %}
                <h3>‚Äî</h3>
                <p>–ù–µ–º–∞—î –ø–ª–∞—Ç–µ–∂—ñ–≤</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂—ñ–≤ -->
    {% if recent_payments %}
    <div class="payments-list">
        <h3>–Ü—Å—Ç–æ—Ä—ñ—è –ø–ª–∞—Ç–µ–∂—ñ–≤</h3>
        <div class="payments-table">
            <div class="table-header">
                <div class="col-date">–î–∞—Ç–∞</div>
                <div class="col-description">–û–ø–∏—Å</div>
                <div class="col-amount">–°—É–º–∞</div>
                <div class="col-status">–°—Ç–∞—Ç—É—Å</div>
                <div class="col-actions">–î—ñ—ó</div>
            </div>
            {% for payment in recent_payments %}
            <div class="table-row">
                <div class="col-date">
                    <div class="payment-date">{{ payment.created_at|date:"d.m.Y" }}</div>
                    <div class="payment-time">{{ payment.created_at|date:"H:i" }}</div>
                </div>
                <div class="col-description">
                    <div class="payment-title">
                        {% if payment.subscription %}
                        –ü—ñ–¥–ø–∏—Å–∫–∞: {{ payment.subscription.plan.name }}
                        {% elif payment.course %}
                        –ö—É—Ä—Å: {{ payment.course.title }}
                        {% elif payment.event_ticket %}
                        –Ü–≤–µ–Ω—Ç: {{ payment.event_ticket.event.title }}
                        {% else %}
                        –ü–ª–∞—Ç—ñ–∂ #{{ payment.id }}
                        {% endif %}
                    </div>
                    <div class="payment-method">
                        {% if payment.payment_method %}
                        {{ payment.get_payment_method_display }}
                        {% else %}
                        –ö–∞—Ä—Ç–∫–∞
                        {% endif %}
                    </div>
                </div>
                <div class="col-amount">
                    <div class="amount">${{ payment.amount }}</div>
                    {% if payment.currency != 'USD' %}
                    <div class="currency">{{ payment.currency }}</div>
                    {% endif %}
                </div>
                <div class="col-status">
                    <span class="status-badge status-{{ payment.status }}">
                        {% if payment.status == 'succeeded' %}
                        –£—Å–ø—ñ—à–Ω–æ
                        {% elif payment.status == 'pending' %}
                        –û—á—ñ–∫—É—î
                        {% elif payment.status == 'failed' %}
                        –ü–æ–º–∏–ª–∫–∞
                        {% elif payment.status == 'cancelled' %}
                        –°–∫–∞—Å–æ–≤–∞–Ω–æ
                        {% else %}
                        {{ payment.get_status_display }}
                        {% endif %}
                    </span>
                </div>
                <div class="col-actions">
                    {% if payment.status == 'succeeded' %}
                    <button class="btn-action" data-action="downloadReceipt" data-payment-id="{{ payment.id }}">
                        –ß–µ–∫
                    </button>
                    {% elif payment.status == 'pending' %}
                    <button class="btn-action" data-action="checkPaymentStatus" data-payment-id="{{ payment.id }}">
                        –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
                    </button>
                    {% elif payment.status == 'failed' %}
                    <button class="btn-action" data-action="retryPayment" data-payment-id="{{ payment.id }}">
                        –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏
                    </button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ) -->
        {% if recent_payments.count >= 10 %}
        <div class="pagination-container">
            <button class="btn-load-more" data-action="loadMorePayments">
                –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —â–µ
            </button>
        </div>
        {% endif %}
    </div>
    {% else %}
    <!-- –ü–æ—Ä–æ–∂–Ω—ñ–π —Å—Ç–∞–Ω -->
    <div class="empty-state">
        <div class="empty-icon">üí≥</div>
        <h3>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø–ª–∞—Ç–µ–∂—ñ–≤</h3>
        <p>–¢—É—Ç –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —ñ—Å—Ç–æ—Ä—ñ—è –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫ —Ç–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤</p>
        <a href="{% url 'core:pricing' %}" class="btn-primary">–û—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É</a>
    </div>
    {% endif %}

    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –∫–∞—Ä—Ç–∫–∏ -->
    <div class="payment-info">
        <div class="info-card">
            <h4>üí° –ö–æ—Ä–∏—Å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h4>
            <ul>
                <li>–í—Å—ñ –ø–ª–∞—Ç–µ–∂—ñ –∑–∞—Ö–∏—â–µ–Ω—ñ SSL —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º</li>
                <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ –º–æ–∂–Ω–∞ –≤–∏–º–∫–Ω—É—Ç–∏</li>
                <li>–ß–µ–∫–∏ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ –≤–∞—à email</li>
                <li>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –¥–æ 14 –¥–Ω—ñ–≤</li>
            </ul>
        </div>

        <div class="info-card">
            <h4>üéÅ –ë–æ–Ω—É—Å–∏ —Ç–∞ –∑–Ω–∏–∂–∫–∏</h4>
            <ul>
                <li>–ù–∞–∫–æ–ø–∏—á—É–π—Ç–µ –±–∞–ª–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ –∑ –∫–æ–∂–Ω–æ—ó –ø–æ–∫—É–ø–∫–∏</li>
                <li>–ó–Ω–∏–∂–∫–∏ –¥–æ 15% –¥–ª—è VIP —É—á–∞—Å–Ω–∏–∫—ñ–≤</li>
                <li>–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤</li>
                <li>–†–µ—Ñ–µ—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∞–º–∏</li>
            </ul>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª–µ–π –ø–ª–∞—Ç–µ–∂—É -->
<div id="payment-details-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>–î–µ—Ç–∞–ª—ñ –ø–ª–∞—Ç–µ–∂—É</h3>
            <button class="modal-close" data-action="closePaymentDetailsModal">&times;</button>
        </div>
        <div class="modal-body">
            <div id="payment-details-content">
                <!-- –¢—É—Ç –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—è –¥–µ—Ç–∞–ª—ñ –ø–ª–∞—Ç–µ–∂—É -->
            </div>
        </div>
    </div>
</div>