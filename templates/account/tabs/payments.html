<!-- –í–∫–ª–∞–¥–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—ó –æ–ø–ª–∞—Ç -->
<div class="payments-tab">
    <div class="tab-header">
        <h2>–Ü—Å—Ç–æ—Ä—ñ—è –æ–ø–ª–∞—Ç</h2>
        <p>–í—Å—ñ –≤–∞—à—ñ —É—Å–ø—ñ—à–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó</p>
    </div>

    {% if all_payments %}
    <div class="payments-table">
        <div class="table-header">
            <div class="col-date">–î–∞—Ç–∞</div>
            <div class="col-description">–û–ø–∏—Å</div>
            <div class="col-amount">–°—É–º–∞</div>
            <div class="col-status">–°—Ç–∞—Ç—É—Å</div>
        </div>

        {% for payment in all_payments %}
        <div class="table-row">
            <div class="col-date">
                <div class="payment-date">{{ payment.created_at|date:"d.m.Y" }}</div>
                <div class="payment-time">{{ payment.created_at|date:"H:i" }}</div>
            </div>

            <div class="col-description">
                <div class="payment-title">
                    {% if payment.subscription %}
                    –ü—ñ–¥–ø–∏—Å–∫–∞ ‚Äî {{ payment.subscription.plan.name }}
                    {% elif payment.course %}
                    –ö—É—Ä—Å: {{ payment.course.title }}
                    {% elif payment.event_ticket %}
                    –Ü–≤–µ–Ω—Ç: {{ payment.event_ticket.event.title }}
                    {% else %}
                    –ü–ª–∞—Ç—ñ–∂ #{{ payment.id }}
                    {% endif %}
                </div>
                {% if payment.payment_method %}
                <div class="payment-method">
                    {{ payment.get_payment_method_display }}
                </div>
                {% endif %}
            </div>

            <div class="col-amount">
                <div class="amount">${{ payment.amount }}</div>
                {% if payment.currency and payment.currency != 'USD' %}
                <div class="currency">{{ payment.currency }}</div>
                {% endif %}
            </div>

            <div class="col-status">
                <span class="status-badge status-succeeded">–°–ø–ª–∞—á–µ–Ω–æ</span>
            </div>

            {% if payment.subscription %}
            <div class="col-action">
                <a href="{% url 'cabinet:subscription' %}" class="btn-repeat">
                    –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏
                </a>
            </div>
            {% else %}
            <div class="col-action">
                <span class="action-empty">‚Äî</span>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- –ü–æ—Ä–æ–∂–Ω—ñ–π —Å—Ç–∞–Ω -->
    <div class="empty-state">
        <div class="empty-icon">üí≥</div>
        <h3>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø–ª–∞—Ç–µ–∂—ñ–≤</h3>
        <p>–Ü—Å—Ç–æ—Ä—ñ—è –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫ –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç</p>
        <a href="{% url 'cabinet:subscription' %}" class="btn-primary">–û—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É</a>
    </div>
    {% endif %}
</div>