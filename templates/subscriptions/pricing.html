{% extends 'base/base.html' %}
{% load static %}

{% block title %}–ü—ñ–¥–ø–∏—Å–∫–∞ - Play Vision{% endblock %}

{% block meta_description %}–û–±–µ—Ä—ñ—Ç—å –ø—ñ–¥–ø–∏—Å–∫—É Play Vision –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –≤—Å—ñ—Ö –∫—É—Ä—Å—ñ–≤ —Ç–∞ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –≤—ñ–¥ –ø—Ä–æ–≤—ñ–¥–Ω–∏—Ö
—Ñ—É—Ç–±–æ–ª—å–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤.{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/components/pricing.css' %}">
{% endblock %}

{% block content %}
<div class="pricing-container">
    <div class="container">
        <!-- Header -->
        <section class="pricing-header">
            <h1 class="pricing-title">Train with a VISION.</h1>
            <p class="pricing-subtitle">Rise through the ranks.</p>
        </section>

        <!-- Plans Grid -->
        <section class="pricing-plans">
            <div class="plans-grid">
                {% for plan in plans %}
                <div class="plan-card {% if plan.is_popular %}plan-card--popular{% endif %}">
                    {% if plan.is_popular %}
                    <div class="plan-badge">–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π</div>
                    {% endif %}

                    <div class="plan-header">
                        <!-- –Ü–∫–æ–Ω–∫–∞ –ø–ª–∞–Ω—É -->
                        <div class="plan-icon">
                            {% if 'C-VISION' in plan.name or 'C-Vision' in plan.name %}
                            <span class="icon-circle">üîµ</span>
                            {% elif 'B-VISION' in plan.name or 'B-Vision' in plan.name %}
                            <span class="icon-trophy">üèÜ</span>
                            {% elif 'A-VISION' in plan.name or 'A-Vision' in plan.name %}
                            <span class="icon-target">üéØ</span>
                            {% elif 'PRO-VISION' in plan.name or 'Pro-Vision' in plan.name %}
                            <span class="icon-crown">üëë</span>
                            {% endif %}
                        </div>

                        <h3 class="plan-name">{{ plan.name }}</h3>

                        <!-- –ü—ñ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
                        <div class="plan-subtitle">
                            {% if 'C-VISION' in plan.name or 'C-Vision' in plan.name %}
                            –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –†—ñ–≤–µ–Ω—å
                            {% elif 'B-VISION' in plan.name or 'B-Vision' in plan.name %}
                            –ë–∞–∑–æ–≤–∏–π + –ü–æ–≥–ª–∏–±–ª–µ–Ω–∏–π
                            {% elif 'A-VISION' in plan.name or 'A-Vision' in plan.name %}
                            –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π
                            {% elif 'PRO-VISION' in plan.name or 'Pro-Vision' in plan.name %}
                            –ï–ª—ñ—Ç–Ω–∏–π
                            {% endif %}
                        </div>

                        <!-- –°–ª–æ–≥–∞–Ω -->
                        <div
                            class="plan-slogan {% if 'C-VISION' in plan.name %}plan-slogan-blue{% elif 'B-VISION' in plan.name %}plan-slogan-orange{% elif 'A-VISION' in plan.name %}plan-slogan-orange{% elif 'PRO-VISION' in plan.name %}plan-slogan-red{% endif %}">
                            {% if 'C-VISION' in plan.name or 'C-Vision' in plan.name %}
                            –ó–Ω–∞–π–¥–∏ —Å–≤—ñ–π PRO-VISION
                            {% elif 'B-VISION' in plan.name or 'B-Vision' in plan.name %}
                            –†–æ–∑–≤–∏–≤–∞–π —Å–≤—ñ–π PRO-VISION
                            {% elif 'A-VISION' in plan.name or 'A-Vision' in plan.name %}
                            –í–¥–æ—Å–∫–æ–Ω–∏ —Å–≤—ñ–π PRO-VISION
                            {% elif 'PRO-VISION' in plan.name or 'Pro-Vision' in plan.name %}
                            –¢–∏ —î PRO-VISION
                            {% endif %}
                        </div>

                        <div class="plan-price">
                            <span class="plan-currency">$</span>
                            <span class="plan-amount">{{ plan.price }}</span>
                            <span class="plan-period">/{{ plan.get_duration_display }}</span>
                        </div>
                    </div>

                    <div class="plan-features">
                        <ul>
                            {% for feature in plan.features %}
                            <li>{{ feature }}</li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div class="plan-actions">
                        {% if current_subscription %}
                        {% if current_subscription.plan == plan %}
                        <button class="btn btn-current" disabled>–ü–æ—Ç–æ—á–Ω–∏–π –ø–ª–∞–Ω</button>
                        {% else %}
                        <form method="post" action="{% url 'subscriptions:subscribe' plan.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary">–ó–º—ñ–Ω–∏—Ç–∏ –ø–ª–∞–Ω</button>
                        </form>
                        {% endif %}
                        {% else %}
                        <form method="post" action="{% url 'subscriptions:subscribe' plan.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary">–û–±—Ä–∞—Ç–∏ –ø–ª–∞–Ω</button>
                        </form>
                        {% endif %}
                    </div>
                </div>
                {% empty %}
                <div class="plans-empty">
                    <p>–ü–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="pricing-faq">
            <h2>–ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h4>–ß–∏ –º–æ–∂—É —è —Å–∫–∞—Å—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É?</h4>
                    <p>–¢–∞–∫, –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–∞—Å—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç —É —Å–≤–æ—î–º—É –æ—Å–æ–±–∏—Å—Ç–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ.</p>
                </div>
                <div class="faq-item">
                    <h4>–ß–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –ø—ñ—Å–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è?</h4>
                    <p>–î–æ—Å—Ç—É–ø –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –¥–æ –∫—ñ–Ω—Ü—è –æ–ø–ª–∞—á–µ–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É.</p>
                </div>
                <div class="faq-item">
                    <h4>–ß–∏ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–ª–∞–Ω?</h4>
                    <p>–¢–∞–∫, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –∞–±–æ –ø–æ–Ω–∏–∑–∏—Ç–∏ –ø–ª–∞–Ω –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç.</p>
                </div>
                <div class="faq-item">
                    <h4>–Ø–∫—ñ —Å–ø–æ—Å–æ–±–∏ –æ–ø–ª–∞—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ?</h4>
                    <p>–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –∫–∞—Ä—Ç–∫–∏, Apple Pay, Google Pay —Ç–∞ —ñ–Ω—à—ñ –ø–æ–ø—É–ª—è—Ä–Ω—ñ –º–µ—Ç–æ–¥–∏.</p>
                </div>
            </div>
        </section>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Add subscription to cart via AJAX
    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('form[action*="subscribe"]');

        forms.forEach(form => {
            form.addEventListener('submit', function (e) {
                const button = form.querySelector('button[type="submit"]');
                if (button) {
                    button.disabled = true;
                    button.textContent = '–î–æ–¥–∞—î–º–æ...';
                }
            });
        });
    });
</script>
{% endblock %}