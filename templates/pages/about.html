{% extends 'base/base.html' %}
{% load static %}

{% block title %}Про Play Vision - Освітня платформа для футбольних фахівців{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/components/about.css' %}">
{% endblock %}

{% block content %}
<div class="about-container">

    <!-- Subscription CTA Section -->
    {% if cms_sections %}
    {% for section in cms_sections %}
    {% if section.section_type == 'cta' %}
    <section class="subscription-cta">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">{{ section.title }}</h2>
                {% if section.subtitle %}<p>{{ section.subtitle }}</p>{% endif %}
                {% for block in section.blocks.all %}
                {% if block.cta_text and block.cta_url %}
                <a href="{{ block.cta_url }}" class="btn btn-primary">{{ block.cta_text }}</a>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}
    {% endfor %}
    {% else %}
    <section class="subscription-cta">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">Оформи підписку, стань частиною спільноти фахівців!</h2>
                <a href="{% url 'core:pricing' %}" class="btn btn-primary">Переглянути тарифи</a>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Mission Section -->
    <section class="mission-section">
        <div class="container">
            <div class="mission-content">
                <div class="mission-text">
                    {% if cms_sections %}
                    {% for section in cms_sections %}
                    {% if section.section_type == 'custom' and 'mission' in section.title|lower %}
                    <h1 class="mission-title">{{ section.title }}</h1>
                    {% for block in section.blocks.all %}
                    <p class="mission-description">{{ block.text }}</p>
                    {% endfor %}
                    {% endif %}
                    {% endfor %}
                    {% endif %}

                    {% if not cms_sections or not cms_sections|length %}
                    <h1 class="mission-title">Про Play Vision</h1>
                    <p class="mission-description">
                        Екосистема Play Vision побудована за принципом «футбольного трикутника»,
                        в якому взаємодіють три суб'єкти: <strong>гравець, тренер і батьки</strong>.
                    </p>
                    <p class="mission-subtitle">
                        Системне впровадження освітніх програм для всіх учасників футбольного
                        середовища — ключ до глибинних змін і справжньої трансформації
                        футбольної індустрії України.
                    </p>
                    {% endif %}
                </div>
                <div class="mission-visual">
                    <div class="play-vision-logo">
                        <div class="logo-container">
                            <h2 class="logo-text">PLAY VISION</h2>
                            <div class="logo-subtitle">
                                <span class="football-icon">⚽</span>
                                «Футбольний трикутник»
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Football Triangle Section -->
    <section class="triangle-section">
        <div class="container">
            <h2 class="section-title">Футбольний трикутник</h2>
            <div class="triangle-container">
                <div class="triangle-visual">
                    <!-- Main Triangle Shape -->
                    <div class="triangle-shape">
                        <svg viewBox="0 0 400 350" class="triangle-svg">
                            <!-- Gradient definition -->
                            <defs>
                                <linearGradient id="triangleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" />
                                    <stop offset="50%" />
                                    <stop offset="100%" />
                                </linearGradient>
                                <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                                    <feDropShadow dx="0" dy="4" stdDeviation="8" />
                                </filter>
                            </defs>

                            <!-- Triangle background -->
                            <polygon points="200,40 80,280 320,280" class="triangle-fill" stroke-width="4"
                                stroke-linejoin="round" filter="url(#shadow)" />

                            <!-- Inner connection lines -->
                            <line x1="200" y1="40" x2="140" y2="160" class="triangle-inner-line" />
                            <line x1="200" y1="40" x2="260" y2="160" class="triangle-inner-line" />
                            <line x1="140" y1="160" x2="260" y2="160" class="triangle-inner-line" />
                            <line x1="140" y1="160" x2="200" y2="280" class="triangle-inner-line" />
                            <line x1="260" y1="160" x2="200" y2="280" class="triangle-inner-line" />

                            <!-- Bidirectional arrows -->
                            <g class="triangle-arrows-group">
                                <!-- Top to Left arrow -->
                                <polygon points="170,100 180,95 180,105" class="triangle-arrow" />
                                <polygon points="170,120 160,115 160,125" class="triangle-arrow" />

                                <!-- Top to Right arrow -->
                                <polygon points="230,100 220,95 220,105" class="triangle-arrow" />
                                <polygon points="230,120 240,115 240,125" class="triangle-arrow" />

                                <!-- Left to Right arrow -->
                                <polygon points="180,160 175,150 175,170" class="triangle-arrow" />
                                <polygon points="220,160 225,150 225,170" class="triangle-arrow" />
                            </g>
                        </svg>
                    </div>

                    <!-- Labels positioned around triangle -->
                    <div class="triangle-labels">
                        <div class="triangle-label triangle-label--top">
                            <span class="label-text">ГРАВЕЦЬ</span>
                        </div>
                        <div class="triangle-label triangle-label--left">
                            <span class="label-text">ТРЕНЕР</span>
                        </div>
                        <div class="triangle-label triangle-label--right">
                            <span class="label-text">БАТЬКИ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Values Section -->
    <section class="values-section">
        <div class="container">
            {% if cms_sections %}
            {% for section in cms_sections %}
            {% if section.section_type == 'custom' and 'values' in section.title|lower or 'цінності' in section.title|lower %}
            <h2 class="section-title">{{ section.title }}</h2>
            <div class="values-grid">
                {% for block in section.blocks.all %}
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">{{ block.title }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% if section.subtitle %}<p class="values-description">{{ section.subtitle }}</p>{% endif %}
            {% endif %}
            {% endfor %}
            {% else %}
            <h2 class="section-title">Наші цінності</h2>
            <div class="values-grid">
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Мотивація</span>
                    </div>
                </div>
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Інтуїція</span>
                    </div>
                </div>
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Допитливість</span>
                    </div>
                </div>
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Прагматизм</span>
                    </div>
                </div>
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Оптимізм</span>
                    </div>
                </div>
                <div class="value-item">
                    <div class="value-circle">
                        <span class="value-text">Спільнота</span>
                    </div>
                </div>
            </div>
            <p class="values-description">
                Ми поєднуємо мотивацію та прагматизм із допитливістю і інтуїцією.
                Опираємось на спільноту практиків і відкритих знань.
            </p>
            {% endif %}
        </div>
    </section>

    <!-- Knowledge Hub Section -->
    <section class="knowledge-hub-section">
        <div class="container">
            {% if cms_sections %}
            {% for section in cms_sections %}
            {% if section.section_type == 'custom' and 'hub' in section.title|lower or 'знань' in section.title|lower %}
            <h2 class="section-title hub-title">{{ section.title }}</h2>
            {% endif %}
            {% endfor %}
            {% else %}
            <h2 class="section-title hub-title">Хаб знань</h2>
            {% endif %}

            <!-- Expert Quotes -->
            <div class="quotes-carousel">
                <div class="quote-container">
                    {% if cms_experts %}
                    {% for expert in cms_experts|slice:":1" %}
                    <div class="quote-slide active">
                        <div class="quote-content">
                            {% if expert.bio %}
                            <div class="quote-text">{{ expert.bio|truncatewords:30 }}</div>
                            {% else %}
                            <div class="quote-text">Найважливіше в футболі — це не фізичні дані, а розуміння гри та
                                прийняття правильних рішень.</div>
                            {% endif %}
                            <div class="quote-author">
                                <div class="author-avatar">
                                    {% if expert.photo %}
                                    <img src="{{ expert.photo.url }}" alt="{{ expert.name }}" loading="lazy">
                                    {% else %}
                                    <img src="{% static 'images/experts/fabian-otte.jpg' %}" alt="{{ expert.name }}"
                                        loading="lazy">
                                    {% endif %}
                                </div>
                                <div class="author-info">
                                    <div class="author-name">{{ expert.name }}</div>
                                    <div class="author-title">{{ expert.position }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="quote-slide active">
                        <div class="quote-content">
                            <div class="quote-text">Найважливіше в футболі — це не фізичні дані, а розуміння гри та
                                прийняття правильних рішень.</div>
                            <div class="quote-author">
                                <div class="author-avatar">
                                    <img src="{% static 'images/experts/fabian-otte.jpg' %}" alt="Dr. Fabian Otte"
                                        loading="lazy">
                                </div>
                                <div class="author-info">
                                    <div class="author-name">Dr. Fabian Otte</div>
                                    <div class="author-title">Фахівець з розвитку навичок</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Main Materials Carousel -->
            <!-- Main Materials - спрощено без Alpine.js -->
            <div class="main-materials">
                <h3 class="materials-title">Головні матеріали</h3>
                <div class="materials-grid">
                    <div class="material-card">
                        <div class="material-image">
                            <img src="{% static 'images/courses/coaching-principles.jpg' %}" alt="Тренерські принципи"
                                loading="lazy">
                            <div class="material-badge">Топ продажів</div>
                        </div>
                        <div class="material-content">
                            <h4 class="material-title">Тренерські принципи</h4>
                            <p class="material-description">Основи ефективного коучингу та методології тренувального
                                процесу</p>
                            <div class="material-meta">
                                <span class="material-duration">8 годин</span>
                                <span class="material-price">₴1,200</span>
                            </div>
                            <a href="{% url 'content:course_list' %}" class="btn btn-primary">Переглянути</a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/about.js' %}" defer></script>
{% endblock %}