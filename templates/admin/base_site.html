{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle}} | {% endif %}PlayVision Admin{% endblock %}

{% block branding %}
<div class="pv-admin-branding">
    <img src="{% static 'images/playvision-logo.svg' %}" alt="PlayVision" class="pv-admin-logo-img">
    <span class="pv-admin-title">Admin Panel</span>
</div>
{% endblock %}

{% block nav-global %}
<nav class="pv-admin-nav">
    <a href="{% url 'admin:index' %}" class="pv-nav-link {% if request.path == '/admin/' %}active{% endif %}">
        Dashboard
    </a>
    <a href="{% url 'admin:cms_heroslide_changelist' %}" class="pv-nav-link">
        Content
    </a>
    <a href="{% url 'admin:cms_trackingpixel_changelist' %}" class="pv-nav-link">
        Pixels
    </a>
    <a href="{% url 'admin:ai_aiconfiguration_changelist' %}" class="pv-nav-link">
        AI
    </a>
    <a href="{% url 'admin:core_auditlog_changelist' %}" class="pv-nav-link">
        Audit Logs
    </a>
</nav>
{% endblock %}

{% block usertools %}
<div class="pv-admin-usertools">
    <button type="button" class="pv-theme-toggle" data-theme-toggle title="Toggle theme">
        <svg class="pv-icon pv-theme-icon-light" viewBox="0 0 24 24" width="20" height="20">
            <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        </svg>
        <svg class="pv-icon pv-theme-icon-dark" viewBox="0 0 24 24" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor"/>
        </svg>
    </button>
    <a href="/" target="_blank" class="pv-view-site">View Site</a>
    {% if user.is_active and user.is_staff %}
    <div class="pv-user-info">
        <span class="pv-user-email">{{ user.email|truncatechars:25 }}</span>
        <a href="{% url 'admin:logout' %}" class="pv-logout-link">Logout</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin/css/playvision-admin.css' %}">
{% endblock %}

{% block extrahead %}
{{ block.super }}
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
{% endblock %}

{% block footer %}
<div class="pv-admin-footer">
    <p>&copy; {% now "Y" %} PlayVision. Senior-level admin panel with enterprise features.</p>
    <p class="pv-footer-meta">
        Country: <strong>{{ request.country_code|default:"Unknown" }}</strong> | 
        IP: <code>{{ request.client_ip|default:"N/A" }}</code>
    </p>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="{% static 'admin/js/playvision-admin.js' %}"></script>
{% endblock %}

